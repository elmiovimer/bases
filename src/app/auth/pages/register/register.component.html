<ion-header translucent="true">
  <ion-toolbar>
    <ion-title color="primary">Registrarse</ion-title>
    <ion-buttons slot="start">
      <ion-buttons slot="start">
        <!-- <ion-back-button></ion-back-button> -->
         <ion-button [routerLink]="['/auth']">
          <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
         </ion-button>
      </ion-buttons>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- contenido -->
 <ion-content fullscreen="true" color="light">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Registrarse</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-grid fixed>
    <ion-row class="ion-justify-content-center">
      <ion-col size="11" size-md="8" size-xl="6">
          <form [formGroup]="datosForm" (ngSubmit)="registrarse()">
              <br>
              <ion-input label="Email"
                type="email"
                placeholder="Email"
                mode="md"
                fill="outline"
                labelPlacement="floating"
                formControlName="email"
                errorText="Ingresa un email válido"
              >
              </ion-input>
              <br>
              <ion-input label="Contraseña"
                type="password"
                placeholder="Contraseña"
                mode="md"
                fill="outline"
                labelPlacement="floating"
                formControlName="password"
                errorText="Debe tener mínimo 6 caracteres"
              >
              <ion-input-password-toggle color="primary" slot="end" *ngIf="datosForm.controls['password']?.value"></ion-input-password-toggle>

              </ion-input>

              <br>

              <ion-input label="Nombre"
                type="text"
                placeholder="Nombre"
                mode="md"
                fill="outline"
                labelPlacement="floating"
                formControlName="name"
                errorText="Este campo es requerido"
              ></ion-input>

              <br>

              <ion-input label="Edad"
                type="number"
                placeholder="Edad"
                mode="md"
                fill="outline"
                labelPlacement="floating"
                formControlName="age"
                errorText="Este campo es requerido"
              ></ion-input>

              <!-- el input de la foto -->
              <input #inputFile
                (change)="viewPreview(inputFile)"
                type="file"
                style="display: none;"
                accept="image/*"
                formControlName="photo"
                [ngClass]="{'is-invalid': datosForm.controls['photo'].invalid }"
                [required]="true"
              >


              <!-- boton para cargar la foto en la app -->
              <ion-list #foto inset  mode="ios">
                <ion-item button lines="none" detail="false" (click)="inputFile.click()">
                  <ion-label>Seleciona una foto de perfil</ion-label>

                      <ion-icon slot="end" name="image" color="primary"></ion-icon>

                </ion-item>
              </ion-list>

              <div *ngIf="datosForm.controls['photo'].invalid " class="error-message">
                ⚠️ Debes seleccionar una foto antes de continuar.
              </div>
              <br>

              <!-- vista previa de la foto -->
              @if(file){
                <ion-img
                  [src]="file | filetourl "
                ></ion-img>
                <br>

               }
               <br>

               <div class="ion-text-center">
                <ion-button type="submit"  shape="round">
                  Registrarse
                </ion-button>
               </div>

          </form>
        <br>

        <div class="ion-text-center">
          <p>¿Ya tienes un usuario?</p>
          <ion-button [routerLink]="['/auth']"  color="secondary" shape="round">
            <ion-icon slot="start" name="arrow-back"></ion-icon>
            Ingresar
          </ion-button>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
 </ion-content>


